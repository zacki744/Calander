<%- include("header", {title: title}); %>

<h2><i></i>A summary of all of your aktivites<i></i></h2>
<br>
<div>
    <form method="post" action="/calendar/Home" id="hiddenMenue">
        
        <label for="f_Title"> Title</label><br>
        <input id="f_Title" type="text" name="f_Title" required><br>

        <label for="f_Category"> Category</label><br>
        <input id="f_Category" type="text" name="f_Category" required><br>

        <label for="f_Description"> Description</label><br>
        <input id="f_Description" type="text" name="f_Description" required><br>

        <label for="f_StartingTime">Starting Time</label><br>
        <input id="f_StartingTime" type="datetime-local" name="f_StartingTime" required><br>

        <label for="f_Deadline">Deadline</label><br>
        <input id="f_Deadline" type="datetime-local" name="f_Deadline" min="getElementById(f_StartingTime)" required><br>

        <label for="f_EstimatedDuration">Estimated Duration</label><br>
        <input id="f_EstimatedDuration" type="number" name="f_EstimatedDuration" required><br> 
        <br>
        <input type="submit" value="Add">

    </form>
</div>
<br>
<button class="circle" type="button" onclick="CreateColumn()"></button>
<br>
<div>
    <table>
        <tr>
            <th> Title </th>
            <th> Category </th>
            <th> Description </th>
            <th> Starting Time </th>
            <th> Deadline </th>
            <th> Estimated Duration </th>
        </tr>
<% for (const row of res) {%>
            <tr class="colums">
                <td><%= row.Title %></td>
                <td><%= row.Category %></td>
                <td><%= row.Description %></td>
                <td><%= row.start %></td>
                <td><%= row.end %></td>
                <td><%= row.EstimatedDuration %></td>
                <td class="bton">
                    <a href="/calendar/update/<%= row.id %>" class="updateLink">Update</a>
                </td>
                <td class="bton">
                    <div class="popup" onclick="myFunction('<%= row.id %>')" method="post">Delete
                        <span class="popuptext" id="myPopup_<%= row.id %>"><a href="/calendar/delete/<%= row.id %>" method="post">Are you sertin?</a></span>
                    </div>
                </td>
                <td class="bton">
                    <a href="/calendar/complete/<%= row.id %>" class="updateLink" method="post">Complete</a>
                </td>
            </td> 
            </tr>

<% }; %>
</table>
</div>
<br>
<%- include("footer"); %>

<script language="javascript">
    function CreateColumn()
    {
        document.getElementById("hiddenMenue").style.display="block";
    }
    function myFunction(id) {
        let theId = "myPopup_" + id;
        var popup = document.getElementById(theId);
        popup.classList.toggle("show");
    }
</script>